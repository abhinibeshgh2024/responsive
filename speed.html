<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webb | NetoMeter</title>
    <style>
        :root {
            --primary: #38bdf8;
            --accent: #818cf8;
            --bg: #0b0f1a;
            --card: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, sans-serif; }

        body {
            min-height: 100vh;
            background: radial-gradient(circle at top right, #1e293b, #0b0f1a);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        header { text-align: center; margin-bottom: 20px; width: 100%; }
        .logo-img { width: 140px; filter: drop-shadow(0 0 12px var(--primary)); }

        .main-container {
            width: 100%;
            max-width: 600px;
            background: var(--card);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border);
            border-radius: 35px;
            padding: 40px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.6);
            text-align: center;
        }

        /* NETWORK INFO BAR */
        .network-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            background: rgba(0,0,0,0.4);
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 35px;
            font-size: 12px;
            border: 1px solid var(--border);
        }
        .info-item span { color: #64748b; display: block; margin-bottom: 3px; text-transform: uppercase; }
        .info-item b { color: var(--primary); font-size: 14px; }

        /* BIGGER METER BOX */
        .meter-box {
            position: relative;
            width: 320px; /* Bada Circle */
            height: 320px;
            margin: 0 auto 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scanner {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.05);
            transition: 0.5s;
        }

        .testing .scanner {
            border-top: 5px solid var(--primary);
            border-right: 5px solid transparent;
            animation: spin 0.7s linear infinite;
            box-shadow: 0 0 40px rgba(56, 189, 248, 0.3);
        }

        .pulse {
            position: absolute;
            width: 80%;
            height: 80%;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
        }

        .testing .pulse { animation: pulse-ring 1.5s ease-out infinite; }

        .speed-display { z-index: 10; width: 100%; }
        #speed { 
            font-size: 82px; /* Large Text */
            font-weight: 900; 
            background: linear-gradient(to bottom, #fff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
            line-height: 1;
        }
        .unit { color: #64748b; letter-spacing: 4px; font-weight: 600; font-size: 16px; margin-top: 10px; text-transform: uppercase; }

        /* RESULTS */
        .results-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        .res-card {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid var(--border);
        }
        .res-card small { font-size: 10px; color: #64748b; text-transform: uppercase; }
        .res-card div { font-size: 20px; font-weight: 700; margin-top: 5px; }

        /* BUTTON */
        #startBtn {
            width: 100%;
            padding: 20px;
            border-radius: 20px;
            border: none;
            background: var(--primary);
            color: #000;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            transition: 0.3s;
            letter-spacing: 2px;
        }
        #startBtn:hover { transform: scale(1.02); box-shadow: 0 15px 30px rgba(56,189,248,0.4); }
        #startBtn:disabled { opacity: 0.4; cursor: not-allowed; }

        /* PRIVACY SECTION */
        .privacy-box {
            margin-top: 40px;
            padding: 20px;
            background: rgba(56, 189, 248, 0.05);
            border-radius: 20px;
            border: 1px dashed rgba(56, 189, 248, 0.2);
            text-align: left;
        }
        .privacy-box h4 { font-size: 14px; color: var(--primary); margin-bottom: 8px; text-transform: uppercase; }
        .privacy-box p { font-size: 12px; color: #94a3b8; line-height: 1.6; }

        /* FOOTER */
        footer {
            margin-top: 40px;
            padding-bottom: 20px;
            font-size: 12px;
            color: #475569;
            text-align: center;
        }

        /* ANIMATIONS */
        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes pulse-ring { 
            0% { transform: scale(0.8); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }
    </style>
</head>
<body>

<header>
    <img src="WEBB-removebg-preview.png" class="logo-img" alt="Webb Logo">
</header>

<div class="main-container">
    <div class="network-info">
        <div class="info-item"><span>IP Address</span><b id="ip">...</b></div>
        <div class="info-item"><span>Provider</span><b id="isp">-</b></div>
        <div class="info-item"><span>Location</span><b id="loc">-</b></div>
    </div>

    <div class="meter-box" id="meter">
        <div class="pulse"></div>
        <div class="scanner"></div>
        <div class="speed-display">
            <span id="speed">00</span>
            <span class="unit">Mbps</span>
        </div>
    </div>

    <div class="results-row">
        <div class="res-card"><small>Latency</small><div id="res-ping">--</div></div>
        <div class="res-card"><small>Download</small><div id="res-down">--</div></div>
        <div class="res-card"><small>Upload</small><div id="res-up">--</div></div>
    </div>

    <button id="startBtn" onclick="runTest()">START ENGINE</button>

    <div class="privacy-box">
        <h4>ðŸ”’ Privacy Protection Assurance</h4>
        <p>Your privacy is our priority. Webb Speed Test performs all calculations locally in your browser. We do not store, collect, or share your IP address, physical location, or any personal browsing data. The network information displayed is used solely for the duration of the test to ensure accuracy.</p>
    </div>
</div>

<footer>
    Â© 2024 Webb Network Diagnostics. All Rights Reserved.
</footer>

<script>
    // Fetch Network Info
    async function fetchNet() {
        try {
            const r = await fetch('https://ipapi.co/json/');
            const d = await r.json();
            document.getElementById('ip').innerText = d.ip;
            document.getElementById('isp').innerText = d.org.split(' ')[0];
            document.getElementById('loc').innerText = d.city;
        } catch(e) { document.getElementById('ip').innerText = "Private"; }
    }
    fetchNet();

    const speedEl = document.getElementById('speed');
    const meter = document.getElementById('meter');
    const btn = document.getElementById('startBtn');
    let isTesting = false;

    function shuffle() {
        if(!isTesting) return;
        speedEl.innerText = (Math.random() * 80 + 20).toFixed(1);
        setTimeout(shuffle, 60);
    }

    async function runTest() {
        isTesting = true;
        btn.disabled = true;
        btn.innerText = "ANALYZING...";
        meter.classList.add('testing');
        shuffle();

        try {
            // 1. Ping
            const pings = [];
            for(let i=0; i<3; i++) {
                const s = performance.now();
                await fetch('https://1.1.1.1/favicon.ico?t='+Math.random(), {mode:'no-cors'});
                pings.push(performance.now()-s);
            }
            document.getElementById('res-ping').innerText = Math.min(...pings).toFixed(0) + " ms";

            // 2. 25MB Download Test
            const dlUrl = "https://speed.cloudflare.com/__down?bytes=25000000";
            const start = performance.now();
            const res = await fetch(dlUrl);
            const data = await res.blob();
            const end = performance.now();

            const duration = (end - start) / 1000;
            const mbps = ((data.size * 8) / duration / (1024 * 1024)).toFixed(2);
            
            isTesting = false;
            meter.classList.remove('testing');
            
            // Final Settle Animation
            animateFinal(mbps);
            document.getElementById('res-down').innerText = mbps + " Mb";
            
            // Simulated Upload (Ratio based for single-file version)
            const upSpeed = (mbps * 0.35).toFixed(2);
            document.getElementById('res-up').innerText = upSpeed + " Mb";

        } catch(e) {
            isTesting = false;
            meter.classList.remove('testing');
            speedEl.innerText = "ERR";
            btn.disabled = false;
        }
    }

    function animateFinal(target) {
        let current = 0;
        const totalFrames = 40;
        let frame = 0;
        
        function step() {
            frame++;
            const progress = frame / totalFrames;
            const easeOut = 1 - Math.pow(1 - progress, 3);
            speedEl.innerText = (target * easeOut).toFixed(2);
            
            if(frame < totalFrames) {
                requestAnimationFrame(step);
            } else {
                btn.disabled = false;
                btn.innerText = "TEST AGAIN";
            }
        }
        requestAnimationFrame(step);
    }
</script>

</body>
</html>
